<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="CustomFieldPopup" owl="1">
        <div class="custom_popup">
            <div role="dialog" class="modal-dialog">
                <div class="lunel">
                    <div class="popup popup-lg">
                        <header class="title">
                            <t t-esc="props.title"/>
                        </header>

                        <t t-call="custom_field_popup_body"/>

                        <div class="footer">
                            <div id="error_msg"/>
                            <div class="button" t-on-click="trigger('click-save')">
                                <t t-if="!env.isMobile">
                                    <i class="fa fa-floppy-o"/>
                                    <span> Save</span>
                                </t>
                                <t t-else="">
                                    <i class="fa fa-floppy-o"/>
                                </t>
                            </div>
                            <div class="button cancel" t-on-click="cancel">
                                <t t-esc="props.cancelText"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="custom_field_popup_body" owl="1">
        <section class="client-details edit">
            <div class="client-details-box clearfix">
                <div class="client-details-left">
                    <t t-foreach="props.customFields" t-as="customField">
                        <!--Single line text box-->
                        <t t-if="customField.field_type == 'char_box' and customField.custom_field_answer_ids"><t t-call="question_single_line_text_box"/></t>
                        <!--Added Product-->
                        <t t-if="customField.field_type == 'add_product'"><t t-call="add_product"/></t>
                        <!--Multiple Choice: Multiple answers allowed-->
                        <t t-if="customField.field_type == 'multiple_choice' and customField.custom_field_answer_ids"><t t-call="question_multiple_choice"/></t>
                        <!--Multiple Choice: Single answers allowed-->
                        <t t-if="customField.field_type == 'simple_choice' and customField.custom_field_answer_ids"><t t-call="question_simple_choice"/></t>
                    </t>
                </div>
            </div>
        </section>
    </t>

    <t t-name="question_single_line_text_box" owl="1">
        <div class="grey-border-bottom">
            <div class="client-detail s_pos_form_field">
                <span class="label"><t t-esc="customField.title"/></span>
                <input class="detail client-address o_website_form_input" t-att-name="customField.title" t-att-product_id="customField.product_id[0]"
                       t-on-change="captureChange" t-att-placeholder="customField.title" t-att-required="customField.constr_mandatory"/>
            </div>
        </div>
    </t>

    <t t-name="add_product" owl="1">
        <div class="grey-border-bottom">
            <div class="client-detail s_pos_form_field">
                <span class="label"><t t-esc="customField.title"/></span>
                <select class="detail client-address needsclick o_website_form_input" name="add_product" t-on-click="trigger('add-product')"
                        t-att-disabled="customField.constr_mandatory" t-att-product_id="customField.add_product_id[0] or customField.product_id[0]"
                        t-att-is_custom_qty="customField.is_custom_qty">
                    <option value="0">No</option>
                    <option value="1" t-att-selected="customField.constr_mandatory">Yes</option>
                </select>
                <t t-if="customField.is_custom_qty">
                    <span class="label">Qty</span>
                    <input class="detail client-address o_website_form_input" type="number" t-on-change="captureChange" value="1" name="add_product"
                           style="width:10%; padding-right:5px;" t-att-required="customField.constr_mandatory" id="qty_update"
                           t-att-product_id="customField.add_product_id[0] or customField.product_id[0]"/>
                </t>
                <t t-if="customField.add_product_id[2]">
                    <t t-set="props.customFields" t-value="customField.add_product_id[2]"/>
                    <t t-call="custom_field_popup_body"/>
                </t>
            </div>
        </div>
    </t>

    <t t-name="question_multiple_choice" owl="1">
        <div class="row grey-border-bottom s_pos_form_field">
            <span class="label"><t t-esc="customField.title"/></span>
            <t t-foreach="customField.custom_field_answer_ids" t-as="custom_field_checkbox">
                <span class="label_question"><t t-esc="custom_field_checkbox.value"/></span>
                <input type="checkbox" class="custom_checkbox client-address o_website_form_input" t-on-change="captureChange" t-att-product_id="customField.product_id[0]"
                       style="width:15px !important; min-height: 0px; padding: 10px; box-shadow: 0px 0px 0px 1px rgb(220 220 220 / 0%) inset;"
                       t-att-related_product_id="custom_field_checkbox.product_id[0]" t-att-name="customField.title" t-att-choice="custom_field_checkbox.value"
                       t-att-required="customField.constr_mandatory"/>
            </t>
        </div>
    </t>

    <t t-name="question_simple_choice" owl="1">
        <div class="grey-border-bottom s_pos_form_field">
            <span class="label"><t t-esc="customField.title"/></span>
            <select class="detail client-address needsclick o_website_form_input" t-att-name="customField.title" t-on-change="captureChange"
                    t-att-product_id="customField.product_id[0]">
                <option value="">None</option>
                <t t-foreach="customField.custom_field_answer_ids" t-as="custom_field_checkbox" t-key="custom_field_checkbox.id">
                    <option t-att-value="custom_field_checkbox.value" t-att-related_product_id="custom_field_checkbox.product_id[0]">
                        <t t-esc="custom_field_checkbox.value"/>
                    </option>
                </t>
            </select>
        </div>
    </t>

</templates>
